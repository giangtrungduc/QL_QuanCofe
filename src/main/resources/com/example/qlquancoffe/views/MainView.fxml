<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="700.0" prefWidth="1200.0" stylesheets="@../css/MainStyles.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.qlquancoffe.controllers.MainController">

    <!-- ==================== TOP BAR ==================== -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: linear-gradient(to right, #2c3e50, #34495e);                      -fx-padding: 15 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 2);">

            <!-- Logo & Title -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label style="-fx-font-size: 28px;" text="â˜•" />
                <VBox spacing="2">
                    <Label style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;" text="QUáº¢N LÃ QUÃN CÃ€ PHÃŠ" />
                    <Label fx:id="lblSubtitle" style="-fx-text-fill: #95a5a6; -fx-font-size: 11px;" text="Há»‡ thá»‘ng Quáº£n lÃ½" />
                </VBox>
            </HBox>

            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS" />

            <!-- User Info -->
            <HBox alignment="CENTER" spacing="15">
                <!-- Clock -->
                <VBox alignment="CENTER_RIGHT" spacing="2">
                    <Label fx:id="lblDateTime" style="-fx-text-fill: #ecf0f1; -fx-font-size: 12px;" text="15/01/2024 14:30" />
                    <Label fx:id="lblDayOfWeek" style="-fx-text-fill: #95a5a6; -fx-font-size: 10px;" text="Thá»© Hai" />
                </VBox>

                <Separator orientation="VERTICAL" prefHeight="40" style="-fx-background-color: #7f8c8d;" />

                <!-- User Profile -->
                <HBox alignment="CENTER" spacing="10" style="-fx-background-color: rgba(255,255,255,0.1);                              -fx-background-radius: 20; -fx-padding: 8 15;">
                    <Label style="-fx-font-size: 20px;" text="ðŸ‘¤" />
                    <VBox spacing="2">
                        <Label fx:id="lblUsername" style="-fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold;" text="Nguyá»…n VÄƒn A" />
                        <Label fx:id="lblRole" style="-fx-text-fill: #e74c3c; -fx-font-size: 11px;" text="Quáº£n lÃ½" />
                    </VBox>
                </HBox>

                <!-- Logout Button -->
                <Button fx:id="btnLogout" onAction="#handleLogout" onMouseEntered="#onLogoutHover" onMouseExited="#onLogoutExit" style="-fx-background-color: #e74c3c; -fx-text-fill: white;                                -fx-font-size: 18px; -fx-background-radius: 50%;                                -fx-min-width: 40px; -fx-min-height: 40px; -fx-cursor: hand;" text="ðŸšª">
                    <tooltip>
                        <Tooltip text="ÄÄƒng xuáº¥t" />
                    </tooltip>
                </Button>
            </HBox>
        </HBox>
    </top>

    <!-- ==================== LEFT SIDEBAR ==================== -->
    <left>
        <VBox fx:id="sidebar" prefWidth="220" spacing="5" style="-fx-background-color: #ecf0f1; -fx-padding: 10; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 2, 0);">

            <!-- MENU HEADER -->
            <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 10 15; -fx-background-color: #34495e; -fx-background-radius: 5;">
                <Label style="-fx-font-size: 20px;" text="ðŸ“‹" />
                <Label style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;" text="MENU CHá»¨C NÄ‚NG" />
            </HBox>

            <Separator style="-fx-padding: 5 0;" />

            <!-- ==================== MENU QUáº¢N LÃ ==================== -->
            <VBox fx:id="menuQuanLy" managed="false" spacing="5" visible="false">
                <Label style="-fx-text-fill: #7f8c8d; -fx-font-size: 11px; -fx-font-weight: bold; -fx-padding: 10 15 5 15;" text="QUáº¢N LÃ" />

                <Button fx:id="btnDashboardQL" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#loadDashboardQL" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="ðŸ“Š  Dashboard" />

                <Button fx:id="btnSanPham" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#loadSanPham" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="ðŸ“¦  Sáº£n pháº©m" />

                <Button fx:id="btnNhanVien" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#loadNhanVien" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="ðŸ‘¥  NhÃ¢n viÃªn" />

                <Button fx:id="btnDoanhThu" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#loadDoanhThu" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="ðŸ’°  Doanh thu" />

                <Button fx:id="btnLichSuHoaDon" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#loadLichSuHoaDon" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="ðŸ“œ  Lá»‹ch sá»­ HÄ" />
            </VBox>

            <!-- ==================== MENU NHÃ‚N VIÃŠN ==================== -->
            <VBox fx:id="menuNhanVien" managed="false" spacing="5" visible="false">
                <Label style="-fx-text-fill: #7f8c8d; -fx-font-size: 11px; -fx-font-weight: bold; -fx-padding: 10 15 5 15;" text="NHÃ‚N VIÃŠN" />

                <Button fx:id="btnDashboardNV" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#loadDashboardNV" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="ðŸ“Š  Dashboard" />

                <Button fx:id="btnBanHang" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#loadBanHang" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-font-weight: bold; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="ðŸ›’  BÃ¡n hÃ ng" />

                <Button fx:id="btnLichSuBan" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#loadLichSuBan" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="ðŸ“  Lá»‹ch sá»­ bÃ¡n" />
            </VBox>

            <!-- SPACER -->
            <Region VBox.vgrow="ALWAYS" />

            <!-- BOTTOM MENU (Chung cho cáº£ 2) -->
            <Separator />

            <Button fx:id="btnHuongDan" alignment="CENTER_LEFT" maxWidth="Infinity" onAction="#showHelp" style="-fx-background-color: transparent; -fx-text-fill: #2c3e50; -fx-font-size: 13px; -fx-padding: 12 15; -fx-cursor: hand; -fx-background-radius: 5; -fx-alignment: CENTER_LEFT;" styleClass="menu-button" text="â“  HÆ°á»›ng dáº«n" />

        </VBox>
    </left>

    <!-- ==================== CENTER CONTENT ==================== -->
    <center>
        <StackPane fx:id="contentArea" style="-fx-background-color: #ffffff; -fx-padding: 20;">

            <!-- DEFAULT CONTENT (Dashboard) -->
            <VBox fx:id="defaultContent" alignment="CENTER" spacing="30">

                <VBox alignment="CENTER" spacing="15">
                    <Label style="-fx-font-size: 80px;" text="â˜•" />
                    <Label style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Há»† THá»NG QUáº¢N LÃ QUÃN CÃ€ PHÃŠ" />
                    <Label fx:id="lblWelcome" style="-fx-font-size: 16px; -fx-text-fill: #7f8c8d;" text="ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i há»‡ thá»‘ng!" />
                </VBox>

                <!-- Quick Stats (CHá»ˆ HIá»‚N THá»Š CHO QUáº¢N LÃ) -->
                <HBox fx:id="statsContainerQL" alignment="CENTER" managed="false" spacing="20" visible="false">

                    <VBox alignment="CENTER" spacing="10" style="-fx-background-color: linear-gradient(to bottom, #3498db, #2980b9); -fx-background-radius: 10; -fx-padding: 20; -fx-min-width: 200;">
                        <Label style="-fx-font-size: 30px;" text="ðŸ’°" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 12px;" text="Doanh thu hÃ´m nay" />
                        <Label fx:id="lblDoanhThuHomNayQL" style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;" text="0 â‚«" />
                    </VBox>

                    <VBox alignment="CENTER" spacing="10" style="-fx-background-color: linear-gradient(to bottom, #27ae60, #229954); -fx-background-radius: 10; -fx-padding: 20; -fx-min-width: 200;">
                        <Label style="-fx-font-size: 30px;" text="ðŸ§¾" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 12px;" text="Sá»‘ Ä‘Æ¡n hÃ ng" />
                        <Label fx:id="lblSoDonHangQL" style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;" text="0 Ä‘Æ¡n" />
                    </VBox>

                    <VBox alignment="CENTER" spacing="10" style="-fx-background-color: linear-gradient(to bottom, #e74c3c, #c0392b); -fx-background-radius: 10; -fx-padding: 20; -fx-min-width: 200;">
                        <Label style="-fx-font-size: 30px;" text="âš ï¸" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 12px;" text="Sáº£n pháº©m sáº¯p háº¿t" />
                        <Label fx:id="lblSanPhamSapHet" style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;" text="0 SP" />
                    </VBox>

                </HBox>

                <!-- Quick Stats (Chá»‰ hiá»ƒn thá»‹ cho nhÃ¢n viÃªn) -->
                <HBox fx:id="statsContainerNV" alignment="CENTER" managed="false" spacing="20" visible="false">
                    <VBox alignment="CENTER" spacing="10" style="-fx-background-color: linear-gradient(to bottom, #3498db, #2980b9); -fx-background-radius: 10; -fx-padding: 20; -fx-min-width: 220;">
                        <Label style="-fx-font-size: 30px;" text="ðŸ’°" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 12px;" text="Doanh thu hÃ´m nay" />
                        <Label fx:id="lblDoanhThuHomNayNV" style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;" text="0 â‚«" />
                    </VBox>

                    <VBox alignment="CENTER" spacing="10" style="-fx-background-color: linear-gradient(to bottom, #27ae60, #229954); -fx-background-radius: 10; -fx-padding: 20; -fx-min-width: 220;">
                        <Label style="-fx-font-size: 30px;" text="ðŸ§¾" />
                        <Label style="-fx-text-fill: white; -fx-font-size: 12px;" text="Sá»‘ Ä‘Æ¡n hÃ ng" />
                        <Label fx:id="lblSoDonHangNV" style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;" text="0 Ä‘Æ¡n" />
                    </VBox>
                </HBox>

                <!-- Quick Actions (PHÃ‚N QUYá»€N) -->
                <HBox fx:id="quickActionsQuanLy" alignment="CENTER" managed="false" spacing="15" visible="false">
                    <Button onAction="#loadSanPham" style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 12 25; -fx-cursor: hand; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸ“¦ Quáº£n lÃ½ sáº£n pháº©m" />

                    <Button onAction="#loadNhanVien" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 12 25; -fx-cursor: hand; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸ‘¥ Quáº£n lÃ½ nhÃ¢n viÃªn" />

                    <Button onAction="#loadDoanhThu" style="-fx-background-color: #16a085; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 12 25; -fx-cursor: hand; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸ“Š Xem bÃ¡o cÃ¡o" />
                </HBox>

                <HBox fx:id="quickActionsNhanVien" alignment="CENTER" managed="false" spacing="15" visible="false">
                    <Button onAction="#loadBanHang" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 16px; -fx-padding: 15 30; -fx-cursor: hand; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸ›’ Báº¯t Ä‘áº§u bÃ¡n hÃ ng" />

                    <Button onAction="#loadLichSuBan" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-size: 16px; -fx-padding: 15 30; -fx-cursor: hand; -fx-background-radius: 5; -fx-font-weight: bold;" text="ðŸ“ Xem lá»‹ch sá»­ bÃ¡n" />
                </HBox>

                <!-- Version info -->
                <VBox alignment="CENTER" spacing="5" style="-fx-padding: 20;">
                    <Label style="-fx-text-fill: #95a5a6; -fx-font-size: 11px;" text="Version 1.0.0 - Pro" />
                    <Label style="-fx-text-fill: #bdc3c7; -fx-font-size: 10px;" text="PhÃ¡t triá»ƒn bá»Ÿi Äá»©c vÃ  nhá»¯ng ngÆ°á»i báº¡n" />
                </VBox>

            </VBox>

        </StackPane>
    </center>

    <!-- ==================== BOTTOM BAR ==================== -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: #34495e; -fx-padding: 8 25;">

            <Label style="-fx-text-fill: #95a5a6; -fx-font-size: 11px;" text="Â© 2100 Coffee Management System" />

            <Region HBox.hgrow="ALWAYS" />

            <HBox alignment="CENTER" spacing="15">
                <Label fx:id="lblStatus" style="-fx-text-fill: #2ecc71; -fx-font-size: 11px;" text="ðŸŸ¢ Káº¿t ná»‘i: á»”n Ä‘á»‹nh" />

                <Separator orientation="VERTICAL" prefHeight="15" style="-fx-background-color: #7f8c8d;" />

                <Label fx:id="lblVersion" style="-fx-text-fill: #95a5a6; -fx-font-size: 11px;" text="v1.0.0" />
            </HBox>

        </HBox>
    </bottom>

</BorderPane>
